#summary Com configurar ttupf en allotjament «shared-hosting», on no es pot editar la configuració d'Apache.
#labels Phase-Deploy

= Introducció =

Aquesta pàgina descriu com desplegar ttupf en un servidor compartit, on no hi ha possibilitat d'editar el fitxer `httpd.conf` per a crear `VirtualHost`.

Segons l'allotjament, la carpeta cap a on s'hagi de fer l'enllaç simbòlic pot variar. Hi ha proveïdors que serveixen els fitxers a partir d'un directori `html` dins del directori del domini, per exemple:
{{{
domini.tld/
  html/
}}}
En aquest cas els enllaços haurien d'apuntar a `domini.tld/html/ttupf`.

= Requisits =
  * Accés SSH
  * Client SVN al servidor
  * PHP 5.3

= Desplegament =
El desplegament consta de tres passos: descàrrega del projecte al servidor, configuració de rutes i configuració del projecte. Els tres passos es realitzen mitjançant una connexió SSH al servidor.

== Descàrrega ==
S'ha de descarregar els fitxers del projecte al servidor. La manera més fàcil és fer un `svn checkout` del repositori. A partir d'una carpeta que no es serveixi a la web es fa el checkout:

`$ svn co https://ttupf.googlecode.com/svn/trunk/src ~/ttupf`

== Configuració de rutes ==
S'ha de crear dos enllaços simbòlics per a què ttupf estigui disponible des de la web. Aquest pas és l'equivalent de la configuració del fitxer `httpd.conf` per al desenvolupament local:

`$ ln -s ~/ttupf/web/ ~/domini.tld/ttupf`

`$ ln -s ~/ttupf/lib/vendor/symfony/data/web/sf/ ~/domini.tld/ttupf/sf`

La carpeta `domini.tld` és la carpeta web arrel. Tal com s'ha fet aquí, ttupf estaria disponible a l'adreça `http://domini.tld/ttupf`.

== Configuració del projecte ==
Ara s'ha de donar accés a la base de dades editant el fitxer `~/ttupf/config/databases.yml` i canviant els paràmetres adients (host, usuari i contrasenya, normalment).
També s'ha de copiar el fitxer `~/ttupf/apps/frontend/config/app.yml.tmpl` a `~/ttupf/apps/frontend/config/app.yml`. Això permet que es pugui accedir a ttupf per l'entorn de producció en comptes de l'entorn dev.

Un cop fet això podem accedir a ttupf a través de la URL `http://domini.tld/ttupf`.